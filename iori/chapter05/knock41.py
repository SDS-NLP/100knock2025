import os
from dotenv import load_dotenv
import google.generativeai as genai

# .env ファイルから API キーを読み込む
load_dotenv()
API_KEY = os.getenv("API_KEY")

# Gemini API の初期化（v1beta で動作するモデル名を指定）
genai.configure(api_key=API_KEY)
model = genai.GenerativeModel("gemini-2.0-flash")

# 4-shot 推論用プロンプト
prompt = """
問題1:
日本の近代化に関連するできごとについて述べた次のア～ウを年代の古い順に並び替えよ。
ア　府知事・県令からなる地方官会議が設置された。
イ　廃藩置県が実施され，中央から府知事・県令が派遣される体制になった。
ウ　すべての藩主が，天皇に領地と領民を返還した。
解答: ウ→イ→ア

問題2:
江戸幕府の北方での対外的な緊張について述べた次の文ア～ウを年代の古い順に並び替えよ。
ア　レザノフが長崎に来航したが，幕府が冷淡な対応をしたため，ロシア船が樺太や択捉島を攻撃した。
イ　ゴローウニンが国後島に上陸し，幕府の役人に捕らえられ抑留された。
ウ　ラクスマンが根室に来航し，漂流民を届けるとともに通商を求めた。
解答: ウ→ア→イ

問題3:
中居屋重兵衛の生涯の期間におこったできごとについて述べた次のア～ウを年代の古い順に並び替えよ。
ア　アヘン戦争がおこり，清がイギリスに敗北した。
イ　異国船打払令が出され，外国船を撃退することが命じられた。
ウ　桜田門外の変がおこり，大老の井伊直弼が暗殺された。
解答: イ→ア→ウ

問題4:
加藤高明が外務大臣として提言を行ってから、内閣総理大臣となり演説を行うまでの時期のできごとについて述べた次のア～ウを年代の古い順に並び替えよ。
ア　朝鮮半島において，独立を求める大衆運動である三・一独立運動が展開された。
イ　関東大震災後の混乱のなかで，朝鮮人や中国人に対する殺傷事件がおきた。
ウ　日本政府が，袁世凱政府に対して二十一カ条の要求を突き付けた。
解答: ウ→ア→イ

問題5:
以下の歴史的できごとを、9世紀に関係するものとして、年代の古い順に並び替えてください。
ア　藤原時平は，策謀を用いて菅原道真を政界から追放した。
イ　嵯峨天皇は，藤原冬嗣らを蔵人頭に任命した。
ウ　藤原良房は，承和の変後，藤原氏の中での北家の優位を確立した。
出力形式：解答のみ（例：イ→ウ→ア）
"""

# Few-shot 推論を実行
response = model.generate_content(prompt)

# 結果表示
print("回答（年代順）:", response.text.strip())
